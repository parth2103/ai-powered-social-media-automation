# Workflow Architecture Diagram

## High-Level Flow

```
Google Sheets → Router Logic → Content Generation OR Social Publishing
     ↓              ↓                    ↓                ↓
Input Ideas    Control Column    AI Content Creation   Multi-Platform
Management     Decision Logic    + Image Generation      Publishing
```

## Detailed Workflow Structure

### Phase 1: Data Input & Trigger
```
┌─────────────────────────────┐
│       Google Sheets         │
│  ┌─────────────────────────┐│
│  │ Column A: My Idea       ││
│  │ Column F: Control       ││
│  │ Column G: Status        ││
│  └─────────────────────────┘│
└─────────────┬───────────────┘
              │
              ▼
┌─────────────────────────────┐
│    Google Sheets Search     │
│      Module (Trigger)       │
│  • Monitors for new entries │
│  • Filters by Control Col   │
│  • Triggers on conditions   │
└─────────────┬───────────────┘
              │
              ▼
```

### Phase 2: Router Decision Logic
```
┌─────────────────────────────┐
│        Router Module        │
│   Decision Point Based on   │
│      Control Column         │
└─────────┬───────────────────┘
          │
    ┌─────┴─────┐
    ▼           ▼
┌───────────┐ ┌──────────────┐
│"Generate  │ │"Create Post" │
│ Content"  │ │   Route      │
│  Route    │ │              │
└───────────┘ └──────────────┘
```

### Phase 3A: Content Generation Route
```
┌─────────────────────────────┐
│     OpenAI GPT-4 Module     │
│  • System prompt with       │
│    platform specifications  │
│  • User idea as input       │
│  • JSON response format     │
└─────────────┬───────────────┘
              │
              ▼
┌─────────────────────────────┐
│      JSON Parse Module      │
│  • Extract Facebook content │
│  • Extract Instagram content│
│  • Extract LinkedIn content │
└─────────────┬───────────────┘
              │
              ▼
┌─────────────────────────────┐
│     DALL-E 3 Module         │
│  • Generate 1024x1024 image │
│  • Based on content idea    │
│  • Optimized for social     │
└─────────────┬───────────────┘
              │
              ▼
┌─────────────────────────────┐
│  Google Sheets Update Row   │
│  • Populate content columns │
│  • Add image URL            │
│  • Update status & timestamp│
└─────────────────────────────┘
```

### Phase 3B: Social Publishing Route
```
┌─────────────────────────────┐
│   Instagram Media Creation  │
│  • Create media object      │
│  • Caption + image URL      │
│  • Queue for publishing     │
└─────────────┬───────────────┘
              │
              ▼
┌─────────────────────────────┐
│  Instagram Publish Module   │
│  • Publish media object     │
│  • Handle API responses     │
└─────────────┬───────────────┘
              │
              ▼
┌─────────────────────────────┐
│   Facebook Page Post        │
│  • Create post with image   │
│  • Platform-specific content│
└─────────────┬───────────────┘
              │
              ▼
┌─────────────────────────────┐
│     LinkedIn Post           │
│  • Professional content     │
│  • Image attachment         │
└─────────────┬───────────────┘
              │
              ▼
┌─────────────────────────────┐
│  Google Sheets Final Update │
│  • Mark as "Posted"         │
│  • Update final timestamp   │
└─────────────────────────────┘
```

## Data Flow Mapping

### Input Data Structure
```
Google Sheets Columns:
A: My Idea (Input)          → OpenAI Content Generation
B: Facebook Post Content    ← Generated by AI
C: Instagram Post Content   ← Generated by AI  
D: LinkedIn Post Content    ← Generated by AI
E: Image Link              ← Generated by DALL-E 3
F: Control Column          → Router Logic
G: Status/Timestamp        ← Updated by workflow
```

### Control Flow States
```
Control Column Values:
1. "Generate Content" → Triggers AI content creation
2. "Create Post"      → Triggers social media publishing
3. "Content Generated"← Updated after AI completion
4. "Posted"          ← Updated after publishing
```

## Error Handling & Recovery

### Module-Level Error Handling
```
Each Module:
├── Connection Validation
├── API Rate Limit Handling  
├── Retry Logic (3 attempts)
├── Error Logging
└── Graceful Degradation
```

### Workflow-Level Recovery
```
Scenario Settings:
├── Max Errors: 3
├── Auto-commit: Enabled
├── Sequential Processing: Disabled
├── Data Loss Prevention: Enabled
└── Dead Letter Queue: Available
```

## Performance Optimizations

### Parallel Processing
- Instagram and Facebook posting run simultaneously
- LinkedIn posting runs in parallel with other platforms
- Multiple ideas processed concurrently when possible

### API Efficiency
- Single OpenAI call generates all platform content
- Bulk Google Sheets updates where possible
- Connection pooling for repeated API calls

### Resource Management
- Optimized prompt length for token efficiency
- Image caching for repeated generations
- Scheduled execution during off-peak hours

## Monitoring & Analytics

### Real-Time Tracking
```
Google Sheets Status Column:
├── "Pending"           - Awaiting processing
├── "Processing"        - Workflow in progress  
├── "Content Generated" - AI content ready
├── "Publishing"        - Posting to platforms
├── "Posted"           - Successfully published
└── "Error: [details]" - Failed with reason
```

### Execution Logs
- Timestamp tracking for each phase
- API response logging
- Error details and stack traces
- Performance metrics per execution

This workflow architecture ensures reliable, scalable social media automation while maintaining quality control and comprehensive monitoring throughout the entire process.